<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="1024px" preserveAspectRatio="none" style="width:660px;height:1024px;background:#FFFFFF;" version="1.1" viewBox="0 0 660 1024" width="660px" zoomAndPan="magnify"><title>Arquitectura de Sistema de Env&#237;os - 99minutos</title><defs/><g><g class="title" data-source-line="5"><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="585.2021" x="32.8989" y="35.4209">Arquitectura de Sistema de Env&#237;os - 99minutos</text></g><!--cluster Fuentes de Clientes--><g class="cluster" data-entity="Fuentes de Clientes" data-source-line="7" data-uid="ent0002" id="cluster_Fuentes de Clientes"><path d="M291,57.6094 L443.6318,57.6094 A7.5,7.5 0 0 1 448.6318,62.6094 L455.6318,79.9063 L551,79.9063 A5,5 0 0 1 556,84.9063 L556,139.6094 A5,5 0 0 1 551,144.6094 L291,144.6094 A5,5 0 0 1 286,139.6094 L286,62.6094 A5,5 0 0 1 291,57.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="286" x2="455.6318" y1="79.9063" y2="79.9063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="156.6318" x="290" y="72.6045">Fuentes de Clientes</text></g><!--cluster REST API Gateway (Go + Echo)--><g class="cluster" data-entity="REST API Gateway .Go . Echo." data-source-line="11" data-uid="ent0004" id="cluster_REST API Gateway .Go . Echo."><polygon fill="#FFFFFF" points="294,203.6094,304,193.6094,643,193.6094,643,388.6094,633,398.6094,294,398.6094,294,203.6094" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="633" x2="643" y1="203.6094" y2="193.6094"/><line style="stroke:#000000;stroke-width:1;" x1="294" x2="633" y1="203.6094" y2="203.6094"/><line style="stroke:#000000;stroke-width:1;" x1="633" x2="633" y1="203.6094" y2="398.6094"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="242.3682" x="343.3159" y="219.6045">REST API Gateway (Go + Echo)</text></g><!--cluster Capa de Procesamiento As?ncrono--><g class="cluster" data-entity="Capa de Procesamiento As.ncrono" data-source-line="17" data-uid="ent0008" id="cluster_Capa de Procesamiento As.ncrono"><path d="M167,447.6094 L432.1855,447.6094 A7.5,7.5 0 0 1 437.1855,452.6094 L444.1855,469.9063 L478,469.9063 A5,5 0 0 1 483,474.9063 L483,784.6094 A5,5 0 0 1 478,789.6094 L167,789.6094 A5,5 0 0 1 162,784.6094 L162,452.6094 A5,5 0 0 1 167,447.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="162" x2="444.1855" y1="469.9063" y2="469.9063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="269.1855" x="166" y="462.6045">Capa de Procesamiento As&#237;ncrono</text></g><!--cluster Worker Pool--><g class="cluster" data-entity="Worker Pool" data-source-line="21" data-uid="ent0011" id="cluster_Worker Pool"><path d="M191,678.6094 L283.8447,678.6094 A7.5,7.5 0 0 1 288.8447,683.6094 L295.8447,700.9063 L418,700.9063 A5,5 0 0 1 423,705.9063 L423,760.6094 A5,5 0 0 1 418,765.6094 L191,765.6094 A5,5 0 0 1 186,760.6094 L186,683.6094 A5,5 0 0 1 191,678.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="186" x2="295.8447" y1="700.9063" y2="700.9063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="96.8447" x="190" y="693.6045">Worker Pool</text></g><!--cluster Persistencia--><g class="cluster" data-entity="Persistencia" data-source-line="27" data-uid="ent0014" id="cluster_Persistencia"><path d="M11,848.6094 C11,838.6094 283.5,838.6094 283.5,838.6094 C283.5,838.6094 556,838.6094 556,848.6094 L556,997.6094 C556,1007.6094 283.5,1007.6094 283.5,1007.6094 C283.5,1007.6094 11,1007.6094 11,997.6094 L11,848.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M11,848.6094 C11,858.6094 283.5,858.6094 283.5,858.6094 C283.5,858.6094 556,858.6094 556,848.6094" fill="none" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="96.8242" x="235.0879" y="873.6045">Persistencia</text></g><!--cluster MongoDB--><g class="cluster" data-entity="MongoDB" data-source-line="28" data-uid="ent0015" id="cluster_MongoDB"><path d="M40,896.6094 L111.4482,896.6094 A7.5,7.5 0 0 1 116.4482,901.6094 L123.4482,918.9063 L313,918.9063 A5,5 0 0 1 318,923.9063 L318,978.6094 A5,5 0 0 1 313,983.6094 L40,983.6094 A5,5 0 0 1 35,978.6094 L35,901.6094 A5,5 0 0 1 40,896.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="35" x2="123.4482" y1="918.9063" y2="918.9063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="75.4482" x="39" y="911.6045">MongoDB</text></g><!--cluster Cach?--><g class="cluster" data-entity="Cach." data-source-line="33" data-uid="ent0018" id="cluster_Cach."><path d="M347,896.6094 L390.4824,896.6094 A7.5,7.5 0 0 1 395.4824,901.6094 L402.4824,918.9063 L527,918.9063 A5,5 0 0 1 532,923.9063 L532,978.6094 A5,5 0 0 1 527,983.6094 L347,983.6094 A5,5 0 0 1 342,978.6094 L342,901.6094 A5,5 0 0 1 347,896.6094" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="342" x2="402.4824" y1="918.9063" y2="918.9063"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="47.4824" x="346" y="911.6045">Cach&#233;</text></g><!--entity Sources--><g class="entity" data-entity="Sources" data-source-line="8" data-uid="ent0003" id="entity_Sources"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="238.9551" x="301.5" y="92.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="218.9551" x="311.5" y="115.6045">Drivers / Almacenes / Scanners</text></g><!--entity Auth--><g class="entity" data-entity="Auth" data-source-line="12" data-uid="ent0005" id="entity_Auth"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="137.9063" x="352" y="233.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="117.9063" x="362" y="256.6045">Auth Middleware</text></g><!--entity ShipH--><g class="entity" data-entity="ShipH" data-source-line="13" data-uid="ent0006" id="entity_ShipH"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="154.0186" x="473" y="346.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="134.0186" x="483" y="369.6045">Shipment Handlers</text></g><!--entity EventH--><g class="entity" data-entity="EventH" data-source-line="14" data-uid="ent0007" id="entity_EventH"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="126.9756" x="310.5" y="346.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="106.9756" x="320.5" y="369.6045">Event Handlers</text></g><!--entity Queue--><g class="entity" data-entity="Queue" data-source-line="18" data-uid="ent0009" id="entity_Queue"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="159.0771" x="292.5" y="482.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="139.0771" x="302.5" y="505.6045">Go Channels Queue</text></g><!--entity Dispatcher--><g class="entity" data-entity="Dispatcher" data-source-line="19" data-uid="ent0010" id="entity_Dispatcher"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="213.5869" x="253" y="579.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="193.5869" x="263" y="602.6045">Dispatcher (Hash Sharding)</text></g><!--entity W1--><g class="entity" data-entity="W1" data-source-line="22" data-uid="ent0012" id="entity_W1"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="83.998" x="202" y="713.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="63.998" x="212" y="736.6045">Worker 1</text></g><!--entity WN--><g class="entity" data-entity="WN" data-source-line="23" data-uid="ent0013" id="entity_WN"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="85.5635" x="321" y="713.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65.5635" x="331" y="736.6045">Worker N</text></g><!--entity ColShip--><g class="entity" data-entity="ColShip" data-source-line="29" data-uid="ent0016" id="entity_ColShip"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="121.124" x="180.5" y="931.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="101.124" x="190.5" y="954.6045">Shipments Col</text></g><!--entity ColEvents--><g class="entity" data-entity="ColEvents" data-source-line="30" data-uid="ent0017" id="entity_ColEvents"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="94.0811" x="51" y="931.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="74.0811" x="61" y="954.6045">Events Col</text></g><!--entity RedisStore--><g class="entity" data-entity="RedisStore" data-source-line="34" data-uid="ent0019" id="entity_RedisStore"><rect fill="#FFFFFF" height="36.2969" rx="5" ry="5" style="stroke:#000000;stroke-width:1;" width="158.7217" x="357.5" y="931.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="138.7217" x="367.5" y="954.6045">Redis Idempotencia</text></g><!--link Sources to Auth--><g class="link" data-entity-1="Sources" data-entity-2="Auth" data-source-line="39" data-uid="lnk20" id="link_Sources_Auth"><path d="M421,128.6494 C421,155.3294 421,200.6594 421,227.4294" fill="none" id="Sources-to-Auth" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="421,233.4294,425,224.4294,421,228.4294,417,224.4294,421,233.4294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53.3901" x="422" y="173.6763">Request</text></g><!--link Auth to ShipH--><g class="link" data-entity-1="Auth" data-entity-2="ShipH" data-source-line="40" data-uid="lnk21" id="link_Auth_ShipH"><path d="M440.87,269.7094 C465.04,290.5094 501.0617,321.5061 525.3417,342.3961" fill="none" id="Auth-to-ShipH" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="529.89,346.3094,525.6764,337.4074,526.0998,343.0484,520.4588,343.4717,529.89,346.3094" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72.0269" x="494" y="312.6763">/shipments</text></g><!--link Auth to EventH--><g class="link" data-entity-1="Auth" data-entity-2="EventH" data-source-line="41" data-uid="lnk22" id="link_Auth_EventH"><path d="M413.66,269.9494 C404.83,290.8094 392.4401,320.0645 383.6301,340.8645" fill="none" id="Auth-to-EventH" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="381.29,346.3894,388.4834,339.6622,383.2401,341.7853,381.1169,336.542,381.29,346.3894" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.1787" x="401" y="312.6763">/events</text></g><!--link ShipH to ColShip--><g class="link" data-entity-1="ShipH" data-entity-2="ColShip" data-source-line="44" data-uid="lnk23" id="link_ShipH_ColShip"><path d="M550.8466,388.9458 C551.7266,414.4858 553,457.7194 553,499.6094 C553,499.6094 553,499.6094 553,732.6094 C553,775.8594 551.37,797.7194 516,822.6094 C500.17,833.7494 359.39,822.1194 342,830.6094 C297.18,852.5094 267.2577,899.109 252.5177,926.199" fill="none" id="ShipH-ColShip" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="550.64,382.9494,546.9523,392.0818,550.8122,387.9464,554.9475,391.8063,550.64,382.9494" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="249.65,931.4694,257.4651,925.4756,252.0397,927.0774,250.4379,921.6521,249.65,931.4694" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="37.6353" x="554" y="602.1763">CRUD</text></g><!--link EventH to Queue--><g class="link" data-entity-1="EventH" data-entity-2="Queue" data-source-line="47" data-uid="lnk24" id="link_EventH_Queue"><path d="M373.74,382.8494 C373.36,408.5794 372.7287,450.74 372.3487,476.43" fill="none" id="EventH-to-Queue" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="372.26,482.4294,376.3927,473.4895,372.334,477.4299,368.3935,473.3712,372.26,482.4294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89.7305" x="374" y="427.6763">202 Accepted</text></g><!--link Queue to Dispatcher--><g class="link" data-entity-1="Queue" data-entity-2="Dispatcher" data-source-line="48" data-uid="lnk25" id="link_Queue_Dispatcher"><path d="M369.8,519.0294 C367.63,536.1794 365.1015,556.2366 362.9415,573.3466" fill="none" id="Queue-to-Dispatcher" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="362.19,579.2994,367.2857,570.8712,362.8162,574.3387,359.3487,569.8693,362.19,579.2994" style="stroke:#000000;stroke-width:1;"/></g><!--link Dispatcher to W1--><g class="link" data-entity-1="Dispatcher" data-entity-2="W1" data-source-line="49" data-uid="lnk26" id="link_Dispatcher_W1"><path d="M284.13,615.6094 C269.18,622.4794 255.27,632.1094 246,645.6094 C232.3,665.5694 234.0746,688.9722 238.0246,707.4322" fill="none" id="Dispatcher-to-W1" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="239.28,713.2994,241.3083,703.6616,238.2338,708.4101,233.4854,705.3356,239.28,713.2994" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105.7583" x="247" y="658.6763">Sharded Stream</text></g><!--link Dispatcher to WN--><g class="link" data-entity-1="Dispatcher" data-entity-2="WN" data-source-line="50" data-uid="lnk27" id="link_Dispatcher_WN"><path d="M360.52,615.8694 C361.29,641.1594 362.5275,682.0522 363.2975,707.3522" fill="none" id="Dispatcher-to-WN" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="363.48,713.3494,367.2044,704.2319,363.3279,708.3517,359.2081,704.4752,363.48,713.3494" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105.7583" x="362" y="658.6763">Sharded Stream</text></g><!--link W1 to RedisStore--><g class="link" data-entity-1="W1" data-entity-2="RedisStore" data-source-line="53" data-uid="lnk28" id="link_W1_RedisStore"><path d="M254.89,749.8794 C265.34,764.9394 282.53,786.1294 303,797.6094 C319.57,806.8994 329.25,794.9794 345,805.6094 C391.49,836.9894 417.5559,894.9367 428.9859,925.6267" fill="none" id="W1-to-RedisStore" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="431.08,931.2494,431.6873,921.4193,429.3349,926.5638,424.1904,924.2114,431.08,931.2494" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.917" x="363" y="818.6763">Check Dedup (1h TTL)</text></g><!--link W1 to ColShip--><g class="link" data-entity-1="W1" data-entity-2="ColShip" data-source-line="54" data-uid="lnk29" id="link_W1_ColShip"><path d="M241.6,749.6794 C239.64,764.4394 237.05,786.3894 236,805.6094 C233.52,850.9994 236.6347,898.5907 238.9047,925.4507" fill="none" id="W1-to-ColShip" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="239.41,931.4294,242.6379,922.1245,238.9889,926.4471,234.6663,922.7982,239.41,931.4294" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="103.7461" x="237" y="818.6763">State Validation</text></g><!--link W1 to ColEvents--><g class="link" data-entity-1="W1" data-entity-2="ColEvents" data-source-line="55" data-uid="lnk30" id="link_W1_ColEvents"><path d="M204,749.6094 C179.96,761.8194 150.69,780.5494 133,805.6094 C105.44,844.6594 99.7257,896.9648 98.5057,925.5648" fill="none" id="W1-to-ColEvents" style="stroke:#000000;stroke-width:1;"/><polygon fill="#000000" points="98.25,931.5594,102.6299,922.738,98.4631,926.5639,94.6372,922.3971,98.25,931.5594" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.8184" x="134" y="818.6763">Persist History</text></g><!--SRC=[PLDDRzim3BthLt2vBCLGjEcjnJ0WIzAcG5jaSROUXXqqcOlLoA8hoHsAeZzeXvxs4_B7HibsFfOS79byV7oadj-50ak4oaXjXLzfMqadIr1KLcJHXYmy6mI7AaYxDBW3SLJRN96pw61mAaJGWP53zrZhmF3QISWHCkq3bkauiK_hD_9m3EVdfRPr82z49TLABX5wbpLtGn-18wFJkGSl0lZtVUpq4peF9p0qfLHeCPup9Iqtzpz0UiYeTWgzU1N24dFqvfDi0SFPDLp9WB_bC_Il23x0H1Lqj24Urg60MvtdXY4E4rECDTciq5N9Ic0gBIEwJXoTDe39qq4sXQPHncQoaQpI_3D7h52MSJY2eL-_MUN8qaOD2nmLSIRZuKkDTQCddTezQ5_9e0hUU7ygVS5QfCkrNHubv3QTuEcnKN5FRiLrCoBJDKoSRNoG6Eu71ucx9d6N4gzni5m6-LDwvfpnrF5-hTAo8_r59kUotYtP9Oq_x_Ng5kfXH2RnydyCRY5fVtlv9jAstypLjHb9LQp_x7MPOwuzNEV85cwq9QeKpW8vt8xo7YvD_K39TJmM6xBr4HmVVqfEW0ikVApH1v5UOpmvW1CdlfjdcslkFoQnqSqzRjP_brhjVWEYeVWOAzeLSCbe_dNyFpwICBwbZVZa1qQVdPx1K2ci0kQY2SRqZWbsx18pzmEkIex17BBWK9O7aBj320jQEBxm1s911XfR22QB1TkbHlq5gXMCCQyhw0yAM2nkZZhWTieiy0S9twJHl75DTWVHNlu5jCQ2AJ_8FVy3]--></g></svg>